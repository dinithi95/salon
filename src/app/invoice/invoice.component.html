<nz-card nzTitle="Invoice">
  <button nz-button nzType="default" (click)="showModal()">Select Appointment</button>

  <div *ngIf="selectedData">
    <label>Appointment Code : </label><span>{{selectedData?.code}}</span><br>
    <label>Customer Name : </label><span>{{selectedData?.name}}</span><br>
    <label>Customer NIC : </label><span>{{selectedData?.nic}}</span><br>
    <label>Customer Email : </label><span>{{selectedData?.email}}</span><br>
    <label>Customer Mobile : </label><span>{{selectedData?.mobile}}</span><br>
    <label>Date : </label><span>{{selectedData?.date}}</span><br>
    <label>Start Time : </label><span>{{selectedData?.start}}</span><br>
    <label>End Time : </label><span>{{selectedData?.end}}</span><br><br>

    <nz-list nzBordered nzHeader="Selected Services">
      <nz-list-item *ngFor="let service of selectedData?.services">
        <span>{{service.name}}</span>
        <span>{{service.duration}}</span>
        <span>{{service.price}}</span>
      </nz-list-item>
      <nz-list-item>
        <span><h4>Total</h4></span>
        <span><h4>{{selectedData?.cost}}</h4></span>
      </nz-list-item>
    </nz-list>
  </div>

<form nz-form [formGroup]="invoiceForm">
  <div nz-row>


    <div nz-col [nzMd]="12">


      <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="code">Invoice Code</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="The input is not valid Code!">
          <input nz-input formControlName="code" id="code" value="{{code}}" readonly/>
        </nz-form-control>
      </nz-form-item>
    </div>

    <div nz-col [nzMd]="12">
      <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="status"
        >Status</nz-form-label
        >
        <div nz-col [nzSm]="14" [nzXs]="24">
          <nz-select nzErrorTip="The input is not valid Status!" nzShowSearch  nzAllowClear  nzPlaceHolder="Select Status" formControlName="status" id="status">
            <nz-option nzLabel="Paid" nzValue="Paid"></nz-option>
            <nz-option nzLabel="Not paid" nzValue="Not paid"></nz-option>
            <nz-option nzLabel="Free" nzValue="Free"></nz-option>
          </nz-select>
        </div>
      </nz-form-item>

    </div>
  </div>
  <button nz-button nzType="default" (click)="reset()">Cancel</button>
  <button nz-button nzType="primary" nz-popconfirm
          nzPopconfirmTitle="Are you sure?"
          (nzOnConfirm)="submit()"
          nzPopconfirmPlacement="top">
    Submit
  </button>
</form>
</nz-card>

<nz-card>

  <nz-table #basicTable1 [nzShowPagination]="false" nzSize="small" [nzData]="invoices">
    <thead>
    <tr>
      <th>Code</th>
      <th>Date</th>
      <th>Price</th>
      <th>Appointment Code</th>
      <th>status</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let data of basicTable1.data">
      <td>{{ data.code }}</td>
      <td>{{ data.date.toString().slice(0,10) }}</td>
      <td>{{ data.price }}</td>
      <td>{{ data.appointment.code }}</td>
      <td>{{ data.status }}</td>
    </tr>
    </tbody>
  </nz-table>

<!--Modal ============================================================================-->
  <nz-modal [(nzVisible)]="isVisible" nzTitle="The first Modal" (nzOnCancel)="closeModal()" [nzFooter]="modalFooter">
    <ng-template #modalFooter>
      <button nz-button nzType="default" (click)="closeModal()">Cancel</button>
    </ng-template>

    <nz-table #basicTable2 [nzShowPagination]="false" nzSize="small" [nzData]="appointments">
      <thead>
      <tr>
        <th>Code</th>
        <th>Customer Name</th>
        <th>Customer Mobile</th>
        <th>Date</th>
        <th>Start Time</th>
        <th>End Time</th>
        <th style="min-width: 110px">Action</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let data of basicTable2.data">
        <td>{{ data.code }}</td>
        <td>{{ data.name }}</td>
        <td>{{ data.mobile }}</td>
        <td>{{ data.date }}</td>
        <td>{{ data.start }}</td>
        <td>{{ data.end }}</td>
        <td>
          <button nz-button nzType="default" (click)="select(data)">Select</button>
        </td>
      </tr>
      </tbody>
    </nz-table>
  </nz-modal>

</nz-card>
